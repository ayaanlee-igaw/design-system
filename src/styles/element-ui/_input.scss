// default input sizing mixin
@mixin input-sizing($height, $font, $icon-sizing, $group-padding) {
  .el-input__wrapper {
    height: $height;
    .el-input__inner {
      font: $font;
      &::placeholder {
        font: $font;
      }
    }

    // prefix
    .el-input__prefix {
      .el-input__prefix-inner > .el-input__icon,
      .el-input__icon,
      .el-input__icon::before {
        font-size: $icon-sizing;
        width: $icon-sizing;
      }
    }
    // suffix
    .el-input__suffix {
      .el-input__suffix-inner > .el-input__icon,
      .el-input__icon,
      .el-input__icon::before {
        font-size: $icon-sizing;
        width: $icon-sizing;
      }
    }
  }

  // input group sizing for button
  &.el-input-group {
    .el-input-group__prepend,
    .el-input-group__append {
      padding: 0 $group-padding;
      font: $font;
    }
  }
}

// default textarea sizing mixin
@mixin textarea-sizing($font) {
  .el-textarea__inner {
    font: $font;
    &::placeholder {
      font: $font;
    }
  }
}

// input number side button sizing
@mixin input-number-button-sizing($width, $height, $button-width) {
  width: $width;
  .el-input__wrapper {
    height: $height;
  }
  .el-input-number__decrease,
  .el-input-number__increase {
    width: $button-width;
  }
}

// valid error
.el-form-item {
  &.is-error {
    .el-input {
      .el-input__wrapper {
        border: $comp-input-border-error;
      }
    }

    .el-textarea {
      .el-textarea__inner {
        border: $comp-input-border-error;
      }
    }
  }
}

// textarea
.el-textarea {
  // default setting
  .el-textarea__inner {
    color: $comp-input-color-text-active;
    background-color: $comp-input-color-background;
    border: $comp-input-border-default;
    border-radius: $comp-input-border-radius-default;
    box-shadow: none;
    &::placeholder {
      color: $comp-input-color-text-placeholder;
    }

    &:focus {
      border: $comp-input-border-active;
      box-shadow: none;
    }
  }

  &:not(.is-disabled) {
    .el-textarea__inner:not(:focus):hover {
      border: $comp-input-border-hover;
      box-shadow: none;
    }
  }

  // disabled
  &.is-disabled {
    .el-textarea__inner {
      opacity: $comp-input-opacity-disabled;
      background-color: $comp-input-color-background-disabled;
      box-shadow: none;
    }
  }

  // count
  .el-input__count {
    font: $comp-input-typography-sub-text;
    color: $comp-input-color-text-sub;
  }

  // sizing
  @include textarea-sizing($comp-input-typography-large);
  &.el-input--medium {
    @include textarea-sizing($comp-input-typography-medium);
  }
  &.el-input--small {
    @include textarea-sizing($comp-input-typography-small);
  }
  &.el-input--mini {
    @include textarea-sizing($comp-input-typography-mini);
  }
}

// input
.el-input {
  // default padding
  .el-input__wrapper {
    padding: 0 $comp-input-spacing-horizontal;

    // prefix margin
    .el-input__prefix {
      .el-input__prefix-inner > .el-input__icon,
      .el-input__icon,
      .el-input__icon::before {
        margin-right: $comp-input-spacing-prefixicon-right;
      }
    }
    // suffix margin
    .el-input__suffix {
      .el-input__suffix-inner > .el-input__icon,
      .el-input__icon,
      .el-input__icon::before {
        margin-left: $comp-input-spacing-prefixicon-right;
      }
    }
  }

  // default setting
  .el-input__wrapper {
    color: $comp-input-color-text-active;
    background-color: $comp-input-color-background;
    border: $comp-input-border-default;
    border-radius: $comp-input-border-radius-default;
    box-shadow: none;
    &::placeholder {
      color: $comp-input-color-text-placeholder;
    }
  }

  // hover
  &:not(.is-disabled) {
    .el-input__wrapper:not(.is-focus):hover {
      border: $comp-input-border-hover;
      box-shadow: none;
    }
  }

  // focus
  .el-input__wrapper.is-focus {
    border: $comp-input-border-active;
    box-shadow: none;
  }

  // disabled
  &.is-disabled {
    .el-input__wrapper {
      opacity: $comp-input-opacity-disabled;
      background-color: $comp-input-color-background-disabled;
      border: $comp-input-border-default;
      box-shadow: none;
    }
  }

  // sizing
  @include input-sizing(
      $comp-input-sizing-height-large,
      $comp-input-typography-large,
      $comp-input-sizing-icon-large,
      $comp-input-spacing-slot-button-horizontal-large
  );
  &.el-input--medium {
    @include input-sizing(
        $comp-input-sizing-height-medium,
        $comp-input-typography-medium,
        $comp-input-sizing-icon-medium,
        $comp-input-spacing-slot-button-horizontal-medium
    );
  }
  &.el-input--small {
    @include input-sizing(
        $comp-input-sizing-height-small,
        $comp-input-typography-small,
        $comp-input-sizing-icon-small,
        $comp-input-spacing-slot-button-horizontal-small
    );
  }
  &.el-input--mini {
    @include input-sizing(
        $comp-input-sizing-height-mini,
        $comp-input-typography-mini,
        $comp-input-sizing-icon-mini,
        $comp-input-spacing-slot-button-horizontal-mini
    );
  }

  // input group border radius
  &.el-input-group {
    // prepend, append border radius
    &.el-input-group--prepend {
      .el-input__wrapper {
        border-radius: 0 $comp-input-border-radius-default $comp-input-border-radius-default 0;
      }
      .el-input-group__prepend {
        border-radius: $comp-input-border-radius-default 0 0 $comp-input-border-radius-default;
        box-shadow: none;
      }
    }
    &.el-input-group--append {
      .el-input__wrapper {
        border-radius: $comp-input-border-radius-default 0 0 $comp-input-border-radius-default;
      }
      .el-input-group__append {
        border-radius: 0 $comp-input-border-radius-default $comp-input-border-radius-default 0;
        box-shadow: none;
      }
    }
    &.el-input-group--prepend.el-input-group--append {
      .el-input__wrapper {
        border-radius: 0;
      }
    }
  }

  // input group button
  &.el-input-group {
    .el-input-group__prepend,
    .el-input-group__append {
      padding: 0 $comp-input-spacing-slot-plaintext-horizontal;
      background-color: $comp-input-color-slot-plaintext-background;
      .el-button {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 100%;
        &:not(:active):not(:focus),
        &:not(:active):focus:hover {
          border-top: $comp-select-border-default;
          border-bottom: $comp-select-border-default;
          box-shadow: none;
        }
      }
    }
    .el-input-group__prepend {
      border-left: $comp-select-border-default;
      .el-button {
        border-radius: $comp-input-border-radius-default 0 0 $comp-input-border-radius-default;
      }
    }
    .el-input-group__append {
      border-right: $comp-select-border-default;
      .el-button {
        border-radius: 0 $comp-input-border-radius-default $comp-input-border-radius-default 0;
      }
    }
  }

  // input group select
  &.el-input-group.input-with-select {
    .el-input-group__prepend,
    .el-input-group__append {
      .el-select {
        margin-left: -$comp-input-spacing-slot-plaintext-horizontal;
        margin-right: -$comp-input-spacing-slot-plaintext-horizontal;
        background-color: $comp-input-color-background;
        .el-input__wrapper {
          border: none;
        }
        //.el-input--suffix,
        //.el-input--prefix {
        //  .el-input__wrapper {
        //    padding: 0 $comp-select-spacing-horizontal;
        //    width: $comp-select-sizing-mixed-input-width-small;
        //  }
        //}
      }
    }
  }
}

// input number
.el-input-number {
  // controls button position
  &.is-controls-right,
  &.is-controls-left {
    .el-input-number__increase {
      height: 50%;
    }
    .el-input-number__decrease {
      height: 50%;
    }
  }

  // input number disabled, hover, active
  &:not(.is-disabled) {
    .el-input-number__decrease,
    .el-input-number__increase {
      color: $comp-input-color-slot-button-icon;
      background-color: $comp-input-color-slot-button-background;
      &:not(.is-disabled):hover {
        color: $comp-input-color-slot-button-icon-active;
      }
      &:hover + .el-input {
        .el-input__wrapper:not(.is-focus) {
          border: $comp-input-border-hover;
        }
      }
      &:hover~.el-input:not(.is-disabled) {
        .el-input__wrapper {
          box-shadow: none;
        }
      }
      &.is-disabled {
        .el-icon {
          opacity: $comp-input-opacity-disabled;
        }
      }
    }
  }

  // button sizing
  @include input-number-button-sizing($comp-input-sizing-number-width-large, $comp-input-sizing-height-large, $comp-input-sizing-slot-button-height-large);
  &.el-input--medium {
    @include input-number-button-sizing($comp-input-sizing-number-width-medium, $comp-input-sizing-height-medium, $comp-input-sizing-slot-button-height-medium);
  }
  &.el-input--small {
    @include input-number-button-sizing($comp-input-sizing-number-width-small, $comp-input-sizing-height-small, $comp-input-sizing-slot-button-height-small);
  }
  &.el-input--mini {
    @include input-number-button-sizing($comp-input-sizing-number-width-mini, $comp-input-sizing-height-mini, $comp-input-sizing-slot-button-height-mini);
  }
}

// dropdown
.el-picker-panel,
.el-date-picker {
  @include layer-index('popover');

  .el-date-editor & {
    @include layer-index('inline-popover');
  }
}

.el-color-dropdown {
  @include layer-index('popover');

  .el-color & {
    @include layer-index('inline-popover');
  }
}
